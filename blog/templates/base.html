<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}My Blog{% endblock %}</title>
    <meta name="description" content="{% block meta_description %}A blog about various topics and interests.{% endblock %}">
    <meta property="og:title" content="{% block og_title %}My Blog{% endblock %}">
    <meta property="og:description" content="{% block og_description %}A blog about various topics and interests.{% endblock %}">
    <meta property="og:image" content="{% block og_image %}{{ request.scheme }}://{{ request.get_host }}{% static 'images/default-og-image.jpg' %}{% endblock %}">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    <meta name="twitter:card" content="summary_large_image">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/2.3.0/alpine.js"></script>
    <link rel="alternate" type="application/rss+xml" title="My Blog RSS Feed" href="{% url 'blog:rss_feed' %}">
    <script>

    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <link rel="alternate" type="application/rss+xml" title="My Blog RSS Feed" href="{% url 'blog:rss_feed' %}">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#8b5cf6',
                        accent: '#f43f5e',
                    }
                }
            }
        }
        
    </script>
    <style>
        /* Lazy loading styles */
        .lazy-image {
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        
        .lazy-image.loaded {
            opacity: 1;
        }

        /* Page transition styles */
        .page-transition {
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        .page-transition.loaded {
            opacity: 1;
        }

        /* Blur loading effect */
        .blur-load {
            filter: blur(20px);
            transition: filter 0.5s ease-in-out;
        }

        .blur-load.loaded {
            filter: blur(0);
        }
    </style>
    {% block extra_head %}{% endblock %}
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 text-gray-800 font-sans">
    <header class="bg-white/80 backdrop-blur-md shadow-lg sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4" x-data="{ isOpen: false }">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center justify-between w-full md:w-auto">
                    <a href="{% url 'blog:post_list' %}" class="flex items-center gap-2 hover:scale-105 transition-transform">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 50" class="w-32 h-8">
                            <!-- Film reel with mystical aura -->
                            <circle cx="25" cy="25" r="20" fill="url(#mysticGradient)" />
                            <circle cx="25" cy="25" r="15" fill="#1a1a1a" />
                            
                            <!-- Spiral effect inside reel -->
                            <path d="M25 10 Q 40 25 25 40 Q 10 25 25 10" 
                                  fill="none" 
                                  stroke="url(#spiralGradient)" 
                                  stroke-width="2" />
                            
                            <!-- Stars -->
                            <circle cx="45" cy="15" r="1.5" fill="#fff" />
                            <circle cx="15" cy="40" r="1" fill="#fff" />
                            <circle cx="40" cy="35" r="1" fill="#fff" />
                            
                            <!-- Text -->
                            <text x="60" y="32" 
                                  font-family="Arial, sans-serif" 
                                  font-weight="bold" 
                                  font-size="24" 
                                  fill="url(#textGradient)">
                                MYSTICFLIX
                            </text>

                            <!-- Gradients -->
                            <defs>
                                <linearGradient id="mysticGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#4F46E5" />
                                    <stop offset="100%" style="stop-color:#7C3AED" />
                                </linearGradient>
                                
                                <linearGradient id="spiralGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#C084FC" />
                                    <stop offset="100%" style="stop-color:#818CF8" />
                                </linearGradient>
                                
                                <linearGradient id="textGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#4F46E5" />
                                    <stop offset="50%" style="stop-color:#7C3AED" />
                                    <stop offset="100%" style="stop-color:#C084FC" />
                                </linearGradient>
                            </defs>
                        </svg>
                    </a>
                    <button @click="isOpen = !isOpen" class="md:hidden rounded-lg focus:outline-none focus:shadow-outline">
                        <svg fill="currentColor" viewBox="0 0 20 20" class="w-6 h-6">
                            <path x-show="!isOpen" fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM9 15a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1z"></path>
                            <path x-show="isOpen" fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"></path>
                        </svg>
                    </button>
                </div>

                <div class="md:flex items-center" :class="{ 'block': isOpen, 'hidden': !isOpen }" x-cloak>
                    <div class="flex flex-col md:flex-row md:items-center mt-4 md:mt-0">
                        <a href="{% url 'blog:post_list' %}" class="text-gray-700 hover:text-primary px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors">Home</a>
                        <a href="{% url 'site_settings:about_us' %}" class="text-gray-700 hover:text-primary px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors">About</a>
                        <a href="{% url 'blog:rss_feed' %}" class="text-gray-700 hover:text-primary px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors">RSS Feed</a>
                    </div>

                    <div class="flex flex-col md:flex-row md:items-center mt-4 md:mt-0 md:ml-6">
                        <form action="{% url 'blog:search' %}" method="get" class="flex flex-col md:flex-row gap-2 mb-4 md:mb-0">
                            <input type="text" name="q" placeholder="Search posts..." 
                                class="px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent shadow-sm">
                            <button type="submit" class="bg-primary hover:bg-secondary text-white font-semibold px-6 py-2 rounded-lg transition-colors shadow-md hover:shadow-lg">
                                Search
                            </button>
                        </form>

                        <div class="flex flex-col md:flex-row gap-2 md:ml-4">
                            {% if user.is_authenticated %}
                                <a href="{% url 'profiles:profile' %}" class="text-gray-700 hover:text-primary px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors">Profile</a>
                                <a href="{% url 'users:logout' %}" class="bg-red-500 hover:bg-red-600 text-white font-semibold px-6 py-2 rounded-lg transition-colors shadow-md hover:shadow-lg">Log Out</a>
                            {% else %}
                                <a href="{% url 'users:login' %}" class="bg-primary hover:bg-secondary text-white font-semibold px-6 py-2 rounded-lg transition-colors shadow-md hover:shadow-lg">Log In</a>
                                <a href="{% url 'users:signup' %}" class="bg-accent hover:bg-pink-600 text-white font-semibold px-6 py-2 rounded-lg transition-colors shadow-md hover:shadow-lg">Sign Up</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </nav>
        {{ header_content|safe }}
    </header>

    <main class="container mx-auto px-6 py-8">
            {{ form.media }}
            {% block content %}
            {% endblock %}
        
    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50">
    <div class="container mx-auto px-4 py-2 overflow-x-auto">
        <ul class="flex space-x-4 whitespace-nowrap">
            {% for category in categories %}
                <li>
                    <a href="{% url 'blog:category_posts' category.slug %}" class="text-sm font-medium text-gray-700 hover:text-primary transition-colors duration-200">
                        {{ category.name }}
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>
</nav>
<style>
    body {
        padding-bottom: 3rem; /* Adjust this value based on the height of your category nav */
    }
</style>

<footer class="bg-white/80 backdrop-blur-md shadow-lg mt-8">
    <div class="container mx-auto px-6 py-8">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <!-- Logo and Copyright Section -->
            <div class="flex flex-col items-center text-center">
                <div class="flex items-center justify-center w-full mb-4">
                    <a href="{% url 'blog:post_list' %}" class="hover:scale-105 transition-transform">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 50" class="w-32 h-8">
                            <circle cx="25" cy="25" r="20" fill="url(#mysticGradient)" />
                            <circle cx="25" cy="25" r="15" fill="#1a1a1a" />
                            <path d="M25 10 Q 40 25 25 40 Q 10 25 25 10" 
                                  fill="none" 
                                  stroke="url(#spiralGradient)" 
                                  stroke-width="2" />
                            <circle cx="45" cy="15" r="1.5" fill="#fff" />
                            <circle cx="15" cy="40" r="1" fill="#fff" />
                            <circle cx="40" cy="35" r="1" fill="#fff" />
                            <text x="60" y="32" 
                                  font-family="Arial, sans-serif" 
                                  font-weight="bold" 
                                  font-size="24" 
                                  fill="url(#textGradient)">
                                MYSTICFLIX
                            </text>
                            <defs>
                                <linearGradient id="mysticGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#4F46E5" />
                                    <stop offset="100%" style="stop-color:#7C3AED" />
                                </linearGradient>
                                <linearGradient id="spiralGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#C084FC" />
                                    <stop offset="100%" style="stop-color:#818CF8" />
                                </linearGradient>
                                <linearGradient id="textGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#4F46E5" />
                                    <stop offset="50%" style="stop-color:#7C3AED" />
                                    <stop offset="100%" style="stop-color:#C084FC" />
                                </linearGradient>
                            </defs>
                        </svg>
                    </a>
                </div>
                <p class="text-gray-600 text-sm">&copy; {% now "Y" %} {{ site_settings.site_name|default:"My Blog" }}. All rights reserved.</p>
            </div>

            <!-- Quick Links Section -->
            <div class="text-center md:text-left">
                <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                <ul class="space-y-2">
                    <li><a href="{% url 'blog:post_list' %}" class="text-gray-600 hover:text-primary transition-colors">Home</a></li>
                    <li><a href="{% url 'site_settings:about_us' %}" class="text-gray-600 hover:text-primary transition-colors">About Us</a></li>
                    <li><a href="{% url 'blog:rss_feed' %}" class="text-gray-600 hover:text-primary transition-colors">RSS Feed</a></li>
                </ul>
            </div>

            <!-- Policies Section -->
            <div class="text-center md:text-left">
                <h3 class="text-lg font-semibold mb-4">Policies</h3>
                <ul class="space-y-2">
                    <li><a href="{% url 'site_settings:disclaimer' %}" class="text-gray-600 hover:text-primary transition-colors">Disclaimer</a></li>
                    <li><a href="{% url 'site_settings:privacy_policy' %}" class="text-gray-600 hover:text-primary transition-colors">Privacy Policy</a></li>
                    <li><a href="{% url 'site_settings:terms_and_conditions' %}" class="text-gray-600 hover:text-primary transition-colors">Terms and Conditions</a></li>
                    <li><a href="{% url 'site_settings:cookies_policy' %}" class="text-gray-600 hover:text-primary transition-colors">Cookies Policy</a></li>
                </ul>
            </div>

            <!-- Social Links Section -->
            <div class="text-center md:text-left">
                <h3 class="text-lg font-semibold mb-4">Connect With Us</h3>
                <div class="flex justify-center md:justify-start space-x-4">
                    {% if site_settings.facebook %}
                    <a href="{{ site_settings.facebook }}" 
                       class="text-gray-600 hover:text-primary transition-colors" 
                       aria-label="Facebook"
                       target="_blank"
                       rel="noopener noreferrer">
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"/>
                        </svg>
                    </a>
                    {% endif %}
                    {% if site_settings.twitter %}
        <a href="{{ site_settings.twitter }}" 
           class="text-gray-600 hover:text-primary transition-colors" 
           aria-label="Twitter"
           target="_blank"
           rel="noopener noreferrer">
            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.061a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.937 4.937 0 004.604 3.417 9.868 9.868 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63a9.936 9.936 0 002.46-2.548l-.047-.02z"/>
            </svg>
        </a>
        {% endif %}

        {% if site_settings.github %}
        <a href="{{ site_settings.github }}" 
           class="text-gray-600 hover:text-primary transition-colors" 
           aria-label="GitHub"
           target="_blank"
           rel="noopener noreferrer">
            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
            </svg>
        </a>
        {% endif %}

        {% if site_settings.telegram %}
        <a href="{{ site_settings.telegram }}" 
           class="text-gray-600 hover:text-primary transition-colors" 
           aria-label="Telegram"
           target="_blank"
           rel="noopener noreferrer">
            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M23.999 2.992c-0.92 0.408-1.925 0.683-2.964 0.794 1.066-0.637 1.992-1.653 2.509-2.848-0.995 0.588-2.091 1.022-3.247 1.28-0.942-1.002-2.278-1.627-3.728-1.627-2.826 0-5.127 2.301-5.127 5.127 0 0.4 0.045 0.786 0.133 1.158-4.267-0.213-8.063-2.254-10.588-5.354-0.441 0.755-0.693 1.634-0.693 2.572 0 1.779 0.905 3.344 2.279 4.27-0.837-0.025-1.623-0.256-2.31-0.636v0.065c0 2.485 1.767 4.55 4.123 5.025-0.428 0.117-0.873 0.173-1.324 0.173-0.324 0-0.637-0.031-0.944-0.086 0.637 1.979 2.476 3.413 4.648 3.453-1.703 1.334-3.846 2.128-6.176 2.128-0.402 0-0.798-0.024-1.183-0.067 2.224 1.425 4.868 2.242 7.705 2.242 9.247 0 14.32-7.663 14.32-14.32 0-0.218-0.005-0.434-0.015-0.651 0.986-0.711 1.825-1.606 2.497-2.623z"/>
            </svg>
        </a>
        {% endif %}

        {% if site_settings.instagram %}
        <a href="{{ site_settings.instagram }}" 
           class="text-gray-600 hover:text-primary transition-colors" 
           aria-label="Instagram"
           target="_blank"
           rel="noopener noreferrer">
            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2.162c3.206 0 3.592 0.012 4.86 0.07 1.446 0.061 2.21 0.305 2.745 0.64 0.577 0.399 1.076 0.898 1.476 1.476 0.335 0.535 0.579 1.299 0.64 2.745 0.058 1.268 0.07 1.654 0.07 4.86s-0.012 3.592-0.07 4.86c-0.061 1.446-0.305 2.21-0.64 2.745-0.399 0.577-0.898 1.076-1.476 1.476-0.535 0.335-1.299 0.579-2.745 0.64-1.268 0.058-1.654 0.07-4.86 0.07s-3.592-0.012-4.86-0.07c-1.446-0.061-2.21-0.305-2.745-0.64-0.577-0.399-1.076-0.898-1.476-1.476-0.335-0.535-0.579-1.299-0.64-2.745-0.058-1.268-0.07-1.654-0.07-4.86s0.012-3.592 0.07-4.86c0.061-1.446 0.305-2.21 0.64-2.745 0.399-0.577 0.898-1.076 1.476-1.476 0.535-0.335 1.299-0.579 2.745-0.64 1.268-0.058 1.654-0.07 4.86-0.07zm0-2.162c-3.23 0-3.64 0.012-4.92 0.071-1.181 0.058-1.99 0.258-2.66 0.54-0.834 0.354-1.605 0.926-2.24 1.56-0.634 0.634-1.206 1.406-1.56 2.24-0.283 0.67-0.482 1.479-0.54 2.66-0.058 1.28-0.071 1.69-0.071 4.92s0.012 3.64 0.071 4.92c0.058 1.181 0.258 1.99 0.54 2.66 0.354 0.834 0.926 1.605 1.56 2.24 0.634 0.634 1.406 1.206 2.24 1.56 0.67 0.283 1.479 0.482 2.66 0.54 1.28 0.058 1.69 0.071 4.92 0.071s3.64-0.012 4.92-0.071c1.181-0.058 1.99-0.258 2.66-0.54 0.834-0.354 1.605-0.926 2.24-1.56 0.634-0.634 1.206-1.406 1.56-2.24 0.283-0.67 0.482-1.479 0.54-2.66 0.058-1.28 0.071-1.69 0.071-4.92s-0.012-3.64-0.071-4.92c-0.058-1.181-0.258-1.99-0.54-2.66-0.354-0.834-0.926-1.605-1.56-2.24-0.634-0.634-1.406-1.206-2.24-1.56-0.67-0.283-1.479-0.482-2.66-0.54-1.28-0.058-1.69-0.071-4.92-0.071zM12 5.838c-3.224 0-5.838 2.614-5.838 5.838s2.614 5.838 5.838 5.838 5.838-2.614 5.838-5.838-2.614-5.838-5.838-5.838zm0 10.68c-2.69 0-4.842-2.152-4.842-4.842 0-2.69 2.152-4.842 4.842-4.842 2.69 0 4.842 2.152 4.842 4.842 0 2.69-2.152 4.842-4.842 4.842zm5.12-10.793c-0.933 0-1.688 0.755-1.688 1.688s0.755 1.688 1.688 1.688 1.688-0.755 1.688-1.688-0.755-1.688-1.688-1.688z"/>
            </svg>
        </a>
        {% endif %}
                </div>
            </div>
        </div>
    </div>
    {{ footer_content|safe }}
</footer>

    <script>
        // Initialize AOS
        AOS.init({
            duration: 10,
            once: true,
            offset: 50,
            easing: 'ease-in-out'
        });

        // Lazy loading implementation
        document.addEventListener('DOMContentLoaded', function() {
            // Add page transition effect
            document.querySelector('.page-transition').classList.add('loaded');

            // Setup Intersection Observer for images
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        if (img.dataset.src) {
                            img.src = img.dataset.src;
                            img.classList.add('loaded');
                            observer.unobserve(img);
                        }
                    }
                });
            }, {
                rootMargin: '50px 0px',
                threshold: 0.1
            });

            // Observe all images with data-src attribute
            document.querySelectorAll('img[data-src]').forEach(img => {
                img.classList.add('lazy-image');
                imageObserver.observe(img);
            });

            // Handle background images
            const bgObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const element = entry.target;
                        if (element.dataset.background) {
                            element.style.backgroundImage = `url(${element.dataset.background})`;
                            element.classList.add('loaded');
                            observer.unobserve(element);
                        }
                    }
                });
            }, {
                rootMargin: '50px 0px',
                threshold: 0.1
            });

            // Observe all elements with data-background attribute
            document.querySelectorAll('[data-background]').forEach(element => {
                element.classList.add('blur-load');
                bgObserver.observe(element);
            });
        });
    </script>
</body>
</html>